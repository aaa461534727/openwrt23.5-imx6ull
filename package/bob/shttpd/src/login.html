
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv='content-type' content='text/html;charset=utf-8'>
<title>路由器登陆界面</title>
<script language="JavaScript">

function xml_auth_post()
{
	var xmlhttp;
	if (window.XMLHttpRequest) {			// code for IE7+, Firefox, Chrome, Opera, Safari
		xmlhttp=new XMLHttpRequest();
	} else {													// code for IE6, IE5
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
	xmlhttp.onreadystatechange=function() 
	{
		if (xmlhttp.readyState==4 && xmlhttp.status==200) {
			var result = xmlhttp.responseText;
			alert(xmlhttp.status);
			alert(xmlhttp.responseURL);
			window.location.href = xmlhttp.responseURL;
//			if(result ==  "1") {
//				if(xmlhttp.responseURL.indexOf("index.html") > 0) {
//					document.getElementById("myDiv").innerHTML="<b>认证成功</b>";
//					alert("认证成功");
//					window.location.href = "/index.html";
//				} else {
//					document.getElementById("myDiv").innerHTML = "<b>帐号/密码错误</b>";
//					alert("认证失败");
//					window.location.href = "login.html";
//				}
		}
	}
	var post_body = "username=" + document.getElementById("usr").value + "&password=" + document.getElementById("pwd").value;
	var cgi_url = "cgi-bin/cstecgi.cgi?" + "action=login";
	xmlhttp.open("POST", cgi_url, true);
	xmlhttp.send(post_body);
}

function go()
{
	xml_auth_post();
}

function update()
{
	document.getElementById("myDiv").innerHTML = "未认证";
}

document.onkeydown = function (e)
{
var currKey=0,e=e||event; 
	currKey=e.keyCode||e.which||e.charCode;//支持IE、FF 
	if (currKey == 13) {
		xml_auth_post();
	}
}
</script>

<style type="text/css">
<!--
body{line-height: 40px}
-->
</style>
</head>

<body>
<table width="500px" border="0" align="center" cellpadding="0" cellspacing="0" style="margin-top:100px;">
	<tr><td style=" border:1px solid #4DB3D9; padding:20px;;">

		<table width="80%" border="0" align="center" cellpadding="0" cellspacing="0" style="margin-top:10px;">
			<tr><td width="80%" align="center">
				路由器登陆界面
			</td></tr>
		</table>

		<table width="80%" border="0" align="center" cellpadding="0" cellspacing="0" style="margin-top:20px;">
		
			<form name="login_form">
				<tr><td>
					用户名:
				</td><td>
					<input name="usr" id="usr" type="text" size="32" maxlength="31" value="" onFocus='update()' onchange='update()'>
				</td></tr>
				
				<tr><td>
					密码:
				</td><td>
					<input name="pwd" id="pwd" type="password" size="32" maxlength="31" value="" onFocus='update()' onchange='update()'>
				</td></tr>
				
				<tr><td>
				
				</td><td>
					<input id="login" type="button" value=" 登 录 " class="btn" onclick='go()'>
				</td></tr>
				
				<tr><td>
					登录状态:
				</td><td>
					<div id="myDiv">未认证</div>
				</td></tr>
			</form>

		</table>
	</td></tr>
</table>
</body>
</html>

